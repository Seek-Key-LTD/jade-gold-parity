{{ define "main" }}
<article class="post">
  <header class="post-header">
    <h1 class="post-title">{{ .Title }}</h1>
    {{- with .Params.categories }}
    <div class="post-categories">
      {{ range . }}
      <span class="category">{{ . }}</span>
      {{ end }}
    </div>
    {{- end }}
    {{- if not .Date.IsZero }}
    <div class="post-meta">
      <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" | safeHTML }}">
        {{ .Date.Format "2006年1月2日" }}
      </time>
      {{- if .Lastmod.After .Date }}
      <span class="lastmod">（更新于 {{ .Lastmod.Format "2006年1月2日" }}）</span>
      {{- end }}
    </div>
    {{- end }}
  </header>

  <div class="post-content">
    {{ .Content }}
  </div>

  <footer class="post-footer">
    {{- with .Params.tags }}
    <div class="post-tags">
      <h4>标签：</h4>
      {{ range . }}
      <a href="{{ "tags/" | relLangURL }}{{ . | urlize }}/">{{ . }}</a>
      {{ end }}
    </div>
    {{- end }}
    
    {{- if .Params.description }}
    <div class="post-description">
      <h4>摘要：</h4>
      <p>{{ .Params.description }}</p>
    </div>
    {{- end }}
  </footer>
</article>

<!-- 文章导航 -->
{{- if or .PrevInSection .NextInSection }}
<nav class="post-nav">
  {{- with .PrevInSection }}
  <a class="prev" href="{{ .Permalink }}">
    <span class="nav-arrow">←</span>
    <div class="nav-info">
      <div class="nav-label">上一篇</div>
      <div class="nav-title">{{ .Title }}</div>
    </div>
  </a>
  {{- end }}
  {{- with .NextInSection }}
  <a class="next" href="{{ .Permalink }}">
    <div class="nav-info">
      <div class="nav-label">下一篇</div>
      <div class="nav-title">{{ .Title }}</div>
    </div>
    <span class="nav-arrow">→</span>
  </a>
  {{- end }}
</nav>
{{- end }}

<!-- 评论区 -->
{{ partial "comments.html" . }}
{{ end }}